/*
 * jFun - JavaScript Pattern Matching v0.12
 *
 * Licensed under the new BSD License.
 * Copyright 2008, Bram Stein
 * All rights reserved.
 */
var fun=function(){function E(F){var G=typeof F,H=F;return function(I,J){return(typeof I===G&&I===H)||(typeof H==="number"&&isNaN(I)&&isNaN(H))}}function B(F){return function(G,H){return G.constructor===F&&H.push(G)>0}}function D(F){var H=F.length,G=F.map(function(I){return A(I)});return function(I,J){return H===I.length&&I.every(function(L,K){return(K in G)&&G[K](I[K],J)})}}function C(H){var G=H.constructor,I=0,F=Object.map(H,function(J){I+=1;return A(J)});return function(J,L){var K=0;return J.constructor===G&&Object.every(J,function(N,M){K+=1;return(M in F)&&F[M](J[M],L)})&&K===I}}function A(F){if(F&&(F===fun.parameter||F.constructor.name===fun.parameter().constructor.name)){return function(G,H){return H.push(G)>0}}else{if(F&&F.constructor===fun.wildcard.constructor){return function(){return true}}else{if(Object.isAtom(F)){return E(F)}else{if(Object.isObject(F)){return C(F)}else{if(Object.isArray(F)){return D(F)}else{if(Object.isFunction(F)){return B(F)}}}}}}}return function(){var G=this,F=Array.slice(arguments,0).map(function(J,I){var H=J.length;return{m:A(J.slice(0,H-1)),c:J[H-1]}});return function(){var K=Array.slice(arguments,0),I=[],J=0,H=F.length;for(;J<H;J+=1){if(F[J].m(K,I)){return F[J].c.apply(G,I)}I=[]}throw"No match for: "+K}}}();fun.parameter=function(A,B){function C(E,D){this.name=E;this.orElse=D}return new C(A,B)};fun.wildcard=function(){function A(){}return new A()}();var extract=function(){function A(D,C,B){if(D&&D.constructor.name===fun.parameter().constructor.name){B[D.name]=D.orElse?C||D.orElse:C}else{if(D&&D.constructor===fun.wildcard.constructor){}else{if(Object.isObject(D)&&Object.isObject(C)){Object.forEach(D,function(E,F){if(F in C){A(E,C[F],B)}else{if(E.hasOwnProperty("orElse")){B[E.name]=E.orElse}}})}else{if(Object.isArray(D)&&Object.isArray(C)){Array.forEach(D,function(E,F){if(F in C){A(E,C[F],B)}else{if(E.hasOwnProperty("orElse")){B[E.name]=E.orElse}}})}else{if(D!==undefined){throw new TypeError("The pattern should only contain variables.")}}}}}}return function(D,C,B){B=B||{};A(D,C,B);return B}}();